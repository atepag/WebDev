{"ast":null,"code":"\"use strict\"; // The MIT License (MIT)\n//\n// Copyright (c) 2017 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst cloud_functions_1 = require(\"../cloud-functions\");\n/** @hidden */\n\n\nexports.provider = 'google.pubsub';\n/** @hidden */\n\nexports.service = 'pubsub.googleapis.com';\n/**\n * Registers a Cloud Function triggered when a Google Cloud Pub/Sub message\n * is sent to a specified topic.\n *\n * @param topic The Pub/Sub topic to watch for message events.\n * @return Pub/Sub topic builder interface.\n */\n\nfunction topic(topic) {\n  return _topicWithOptions(topic, {});\n}\n\nexports.topic = topic;\n/** @hidden */\n\nfunction _topicWithOptions(topic, options) {\n  if (topic.indexOf('/') !== -1) {\n    throw new Error('Topic name may not have a /');\n  }\n\n  return new TopicBuilder(() => {\n    if (!process.env.GCLOUD_PROJECT) {\n      throw new Error('process.env.GCLOUD_PROJECT is not set.');\n    }\n\n    return `projects/${process.env.GCLOUD_PROJECT}/topics/${topic}`;\n  }, options);\n}\n\nexports._topicWithOptions = _topicWithOptions;\n/**\n * The Google Cloud Pub/Sub topic builder.\n *\n * Access via [`functions.pubsub.topic()`](providers_pubsub_.html#topic).\n */\n\nclass TopicBuilder {\n  /** @hidden */\n  constructor(triggerResource, options) {\n    this.triggerResource = triggerResource;\n    this.options = options;\n  }\n  /**\n   * Event handler that fires every time a Cloud Pub/Sub message is\n   * published.\n   *\n   * @param handler Event handler that runs every time a Cloud Pub/Sub message\n   *   is published.\n   * @return A Cloud Function that you can export and deploy.\n   */\n\n\n  onPublish(handler) {\n    return cloud_functions_1.makeCloudFunction({\n      handler,\n      provider: exports.provider,\n      service: exports.service,\n      triggerResource: this.triggerResource,\n      eventType: 'topic.publish',\n      dataConstructor: raw => new Message(raw.data),\n      options: this.options\n    });\n  }\n\n}\n\nexports.TopicBuilder = TopicBuilder;\n\nfunction schedule(schedule) {\n  return _scheduleWithOptions(schedule, {});\n}\n\nexports.schedule = schedule;\n/** @hidden */\n\nfunction _scheduleWithOptions(schedule, options) {\n  const triggerResource = () => {\n    if (!process.env.GCLOUD_PROJECT) {\n      throw new Error('process.env.GCLOUD_PROJECT is not set.');\n    } // The CLI will append the correct topic name based on region and function name\n\n\n    return `projects/${process.env.GCLOUD_PROJECT}/topics`;\n  };\n\n  return new ScheduleBuilder(triggerResource, Object.assign(Object.assign({}, options), {\n    schedule: {\n      schedule\n    }\n  }));\n}\n\nexports._scheduleWithOptions = _scheduleWithOptions;\n\nclass ScheduleBuilder {\n  /** @hidden */\n  constructor(triggerResource, options) {\n    this.triggerResource = triggerResource;\n    this.options = options;\n  }\n\n  retryConfig(config) {\n    this.options.schedule.retryConfig = config;\n    return this;\n  }\n\n  timeZone(timeZone) {\n    this.options.schedule.timeZone = timeZone;\n    return this;\n  }\n\n  onRun(handler) {\n    const cloudFunction = cloud_functions_1.makeCloudFunction({\n      contextOnlyHandler: handler,\n      provider: exports.provider,\n      service: exports.service,\n      triggerResource: this.triggerResource,\n      eventType: 'topic.publish',\n      options: this.options,\n      labels: {\n        'deployment-scheduled': 'true'\n      }\n    });\n    return cloudFunction;\n  }\n\n}\n\nexports.ScheduleBuilder = ScheduleBuilder;\n/**\n * Interface representing a Google Cloud Pub/Sub message.\n *\n * @param data Payload of a Pub/Sub message.\n */\n\nclass Message {\n  constructor(data) {\n    [this.data, this.attributes, this._json] = [data.data, data.attributes || {}, data.json];\n  }\n  /**\n   * The JSON data payload of this message object, if any.\n   */\n\n\n  get json() {\n    if (typeof this._json === 'undefined') {\n      this._json = JSON.parse(new Buffer(this.data, 'base64').toString('utf8'));\n    }\n\n    return this._json;\n  }\n  /**\n   * Returns a JSON-serializable representation of this object.\n   *\n   * @return A JSON-serializable representation of this object.\n   */\n\n\n  toJSON() {\n    return {\n      data: this.data,\n      attributes: this.attributes\n    };\n  }\n\n}\n\nexports.Message = Message;","map":{"version":3,"sources":["/Users/a3506/Documents/WebDev/Map/WebDev/covid_map/node_modules/firebase-functions/lib/providers/pubsub.js"],"names":["Object","defineProperty","exports","value","cloud_functions_1","require","provider","service","topic","_topicWithOptions","options","indexOf","Error","TopicBuilder","process","env","GCLOUD_PROJECT","constructor","triggerResource","onPublish","handler","makeCloudFunction","eventType","dataConstructor","raw","Message","data","schedule","_scheduleWithOptions","ScheduleBuilder","assign","retryConfig","config","timeZone","onRun","cloudFunction","contextOnlyHandler","labels","attributes","_json","json","JSON","parse","Buffer","toString","toJSON"],"mappings":"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","sourcesContent":["\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2017 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cloud_functions_1 = require(\"../cloud-functions\");\n/** @hidden */\nexports.provider = 'google.pubsub';\n/** @hidden */\nexports.service = 'pubsub.googleapis.com';\n/**\n * Registers a Cloud Function triggered when a Google Cloud Pub/Sub message\n * is sent to a specified topic.\n *\n * @param topic The Pub/Sub topic to watch for message events.\n * @return Pub/Sub topic builder interface.\n */\nfunction topic(topic) {\n    return _topicWithOptions(topic, {});\n}\nexports.topic = topic;\n/** @hidden */\nfunction _topicWithOptions(topic, options) {\n    if (topic.indexOf('/') !== -1) {\n        throw new Error('Topic name may not have a /');\n    }\n    return new TopicBuilder(() => {\n        if (!process.env.GCLOUD_PROJECT) {\n            throw new Error('process.env.GCLOUD_PROJECT is not set.');\n        }\n        return `projects/${process.env.GCLOUD_PROJECT}/topics/${topic}`;\n    }, options);\n}\nexports._topicWithOptions = _topicWithOptions;\n/**\n * The Google Cloud Pub/Sub topic builder.\n *\n * Access via [`functions.pubsub.topic()`](providers_pubsub_.html#topic).\n */\nclass TopicBuilder {\n    /** @hidden */\n    constructor(triggerResource, options) {\n        this.triggerResource = triggerResource;\n        this.options = options;\n    }\n    /**\n     * Event handler that fires every time a Cloud Pub/Sub message is\n     * published.\n     *\n     * @param handler Event handler that runs every time a Cloud Pub/Sub message\n     *   is published.\n     * @return A Cloud Function that you can export and deploy.\n     */\n    onPublish(handler) {\n        return cloud_functions_1.makeCloudFunction({\n            handler,\n            provider: exports.provider,\n            service: exports.service,\n            triggerResource: this.triggerResource,\n            eventType: 'topic.publish',\n            dataConstructor: (raw) => new Message(raw.data),\n            options: this.options,\n        });\n    }\n}\nexports.TopicBuilder = TopicBuilder;\nfunction schedule(schedule) {\n    return _scheduleWithOptions(schedule, {});\n}\nexports.schedule = schedule;\n/** @hidden */\nfunction _scheduleWithOptions(schedule, options) {\n    const triggerResource = () => {\n        if (!process.env.GCLOUD_PROJECT) {\n            throw new Error('process.env.GCLOUD_PROJECT is not set.');\n        }\n        // The CLI will append the correct topic name based on region and function name\n        return `projects/${process.env.GCLOUD_PROJECT}/topics`;\n    };\n    return new ScheduleBuilder(triggerResource, Object.assign(Object.assign({}, options), { schedule: { schedule } }));\n}\nexports._scheduleWithOptions = _scheduleWithOptions;\nclass ScheduleBuilder {\n    /** @hidden */\n    constructor(triggerResource, options) {\n        this.triggerResource = triggerResource;\n        this.options = options;\n    }\n    retryConfig(config) {\n        this.options.schedule.retryConfig = config;\n        return this;\n    }\n    timeZone(timeZone) {\n        this.options.schedule.timeZone = timeZone;\n        return this;\n    }\n    onRun(handler) {\n        const cloudFunction = cloud_functions_1.makeCloudFunction({\n            contextOnlyHandler: handler,\n            provider: exports.provider,\n            service: exports.service,\n            triggerResource: this.triggerResource,\n            eventType: 'topic.publish',\n            options: this.options,\n            labels: { 'deployment-scheduled': 'true' },\n        });\n        return cloudFunction;\n    }\n}\nexports.ScheduleBuilder = ScheduleBuilder;\n/**\n * Interface representing a Google Cloud Pub/Sub message.\n *\n * @param data Payload of a Pub/Sub message.\n */\nclass Message {\n    constructor(data) {\n        [this.data, this.attributes, this._json] = [\n            data.data,\n            data.attributes || {},\n            data.json,\n        ];\n    }\n    /**\n     * The JSON data payload of this message object, if any.\n     */\n    get json() {\n        if (typeof this._json === 'undefined') {\n            this._json = JSON.parse(new Buffer(this.data, 'base64').toString('utf8'));\n        }\n        return this._json;\n    }\n    /**\n     * Returns a JSON-serializable representation of this object.\n     *\n     * @return A JSON-serializable representation of this object.\n     */\n    toJSON() {\n        return {\n            data: this.data,\n            attributes: this.attributes,\n        };\n    }\n}\nexports.Message = Message;\n"]},"metadata":{},"sourceType":"script"}